---
id: i18n
title: i18n
description: Translate jsonforms
---

import I18nExample from '../../src/components/docs/i18n';

:::note

Please note that the renderer sets themselves are not yet translatable.
You can find the current status here:
https://github.com/eclipsesource/jsonforms/issues/1826

:::

The translate functionality of JSONForms is integrated into the core component.
In order to translate JSONForms, you need to set a translation function and provide it to the JSONForms component:
```ts
const translator = (key, defaultMessage) => {
  console.log(`Key: ${key}, Default Message: ${defaultMessage}`);
  return defaultMessage;
};

const [locale, setLocale] = useState<'de'|'en'>('de');

<JsonForms
  i18n={{locale: locale, translate: translator}}
  ...
/>
```

The i18n prop consist of three components: `locale`, `translate` and `translateError`. 

## `locale`

Allows to specify the current locale of the application.
This can be used by renderers to render locale specific UI elements, for example for locale-aware formatting of numbers.


## `translate`

Allows to provide a translation function, which handles the actual translation.

:::caution

The translate function should be side effect free and should be stable (memoized) to avoid unnecessary re-renderings, i.e. the translate function should only change if there are new translations.

:::


The translate function has the following parameters:

### `key`

The key is used to identify the string, that needs to be translated.
It can be set using the `UI Schema`, the `JSON Schema` or is generated by default based on the property path.

#### UI Schema option

The key can be set via the `i18n` UI Schema option:
```json
{ 
  "type": "Control", 
  "label": "name", 
  "scope": "#/properties/name", 
  "options": { 
    "i18n": "customName" 
  } 
}
```

Therefore the translation will be invoked with `customName.label` & `customName.description`.

#### JSON Schema

The key can also be set with the custom JSON Schema `i18n` option:
```json
{
  "name": { 
    "type": "string", 
    "i18n": "myCustomName" 
  }
} 
```

Therefore the translation will be invoked with `myCustomName.label` & `myCustomName.description`.

#### Default: Property path

Is none of the above is set, the property path will be used as the key.
e.g. `name`.

```
{
  properties: {
    firstName: {
      type: "string"
    },
    address: {
      type: "object",
      properties: {
        street: {
          type: "string"
        }
      }
    }
    comments: {
      type: "array",
      items: {
        type: "object",
        properties: {
          message: {
            type: "string"
          },
        }
      }
    }
  }
}
```

The paths in the above example would be:
- `firstName.label` & `firstName.description`
- `address.street.label` & `address.street.description`
- `comments.message.label` & `comments.message.description` (the path for arrays will not contain indices)

### `defaultMessage`

The default message is provided by JSONForms and can act as a fallback or could be translated.

:::note

If the `defaultMessage` is `undefined` you should also return `undefined` if you don't have a translation for the given key.
Returning an empty string (or something similar) instead may result in undesired behavior.
JSON Forms will use `undefined` when the message could be skipped or another more generic key could be tried.

:::

### `values`

The values can contain additional context for the current translation.
For example all error translations will have the AJV error object as part of the values object.

## Error Customizations

TODO: Description

#### `<i18nkey>.error.custom`

If `<i18nkey>.error.custom` is set, just this single message will be used, no matter how many errors are present.

This is useful if there are many JSON Schema validaton keywords defined for a single property, but a single cohesive message shall be displayed.

## `translateError`

The `translateError` is called for every AJV error. 
`translateError` is an optional parameter to the i18n object. Usually it is not expected to customize this option.
By default error it works like this:

`<i18nkey>` in the sections below refers to the key of the field (see `key` section above).

### Evaluation order

#### `<i18nkey>.error.<keyword>`

Example keys: `name.error.required`, `address.street.error.pattern`

The default `translateError` will first look for a concrete message for a specific field and a specific error type.

#### `error.<keyword>`

Example keys: `error.required`, `error.pattern`

After checking field specific translations, `translateError` will then look for form-wide translations of errors, independent of each respective field.
This is useful to customize for example `required` or `pattern` messages for all properties.

#### error message

Next the translator will look for a default message, which is provided by the core framework.

#### Default AJV error message

If none of the above apply, the `message` provided by the AJV error object will be used.

### Example

Consider the following schema for an object attribute:
```js
{
  phone: {
    type: "string",
    minLength: 10,
    pattern: "^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$"
  }
}
```
The order in which the error keys are evaluated is the following:
- `phone.error.custom`: if this is set, the `pattern` and `minLength` errors will be ignores and just this message is used
- `phone.error.pattern` & `phone.error.minLength`
- `error.pattern` & `error.minLength`

## Enum translation

Enum translations are based on the respective entries:
 - For JSON Schema `enum`, the stringified value is used.
 - For JSON Schema `oneOf` enums which consist of (`title`, `const`) pairs a specialized `i18n` key or `title` is used.

Therefore, in order to translate enum values, an additional key is checked for each enum entry.
For example:
Let's assume we have a field `Gender`, which has three possible values: 
- `Male`
- `Female`
- `Other`


## Access translation in custom renderer sets

If you want to directly access the i18n properties within a custom renderer, you can use the JSONForms context for that:
```
const ctx = useJsonForms();

const locale = ctx.i18n.locale;
const translate = ctx.i18n.translate;
const translateError = ctx.i18n.translateError;
```

With this you can for example change phone number patterns based on the current locale for validation.

## Example

<I18nExample />
